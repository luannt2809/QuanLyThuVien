<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sửa sách</title>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/stylesheets/accounts.css" />
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <%- include('../layouts/navBooks.ejs') %>
        </div>

        <div class="row">
            <div class="container pt-3 pb-2 mb-3 border-bottom">
                <h1 class="h3 ps-4">Sửa thông tin</h1>
            </div>
        </div>

        <form action="/books/edit/<%= book._id %>" method="POST" class="mx-4" enctype="multipart/form-data">
            <% if (msg) { %>
                <p class="alert alert-danger">
                    <%= msg %>
                </p>
                <% } %>
                    <div class="row form-group mb-4">
                        <div class="col">
                            <label for="name">Tên sách</label>
                            <input type="text" class="form-control" id="name" name="name" value="<%= book.name %>"
                                placeholder="Tên sách">
                        </div>

                        <div class="col">
                            <label for="author">Tác giả</label>
                            <input type="text" class="form-control" id="author" name="author" value="<%= book.author %>"
                                placeholder="Tác giả">
                        </div>
                    </div>

                    <div class="row form-group mb-4">
                        <div class="col">
                            <label for="priceBook">Giá sách</label>
                            <input type="number" class="form-control" id="priceBook" name="priceBook"
                                value="<%= book.priceBook %>" placeholder="Giá sách">
                        </div>

                        <div class="col">
                            <label for="priceRent">Giá thuê</label>
                            <input type="number" class="form-control" id="priceRent" name="priceRent"
                                value="<%= book.priceRent%>" placeholder="Giá thuê">
                        </div>
                    </div>

                    <div class="row form-group mb-4">
                        <div class="col">
                            <label for="quantity">Số lượng</label>
                            <input type="number" class="form-control" id="quantity" name="quantity"
                                value="<%= book.quantity %>" placeholder="Số lượng">
                        </div>

                        <div class="col">
                            <label for="nxb">Nhà xuất bản</label>
                            <input type="text" class="form-control" id="nxb" name="nxb" value="<%= book.nxb %>"
                                placeholder="Nhà xuất bản">
                        </div>
                    </div>

                    <div class="row form-group mb-4">
                        <div class="col">
                            <label for="image">Ảnh</label>
                            <input type="file" class="form-control" id="image" name="image" value="" placeholder="Ảnh">
                        </div>

                        <div class="col">
                            <label for="cateId">Thể loại</label>
                            <select class="form-select" aria-label="Chọn thể loại" name="cateId" required>
                                <% categories.forEach( (element)=>{
                                    let selected = '';
                                    if(String( element._id ) == String(book.cateId) ){
                                    selected = ' selected ';
                                    }
                                    %>

                                    <option <%=selected %>
                                        value="<%= element._id %>"> <%= element.name %>
                                    </option>
                                    <% } ) %>
                            </select>
                        </div>

                    </div>

                    <div class="form-group mb-4">
                        <label for="desc">Mô tả</label>
                        <textarea class="form-control mt-2" name="desc" id="desc" cols="30" rows="10"
                            placeholder="Mô tả sản phẩm"><%= book.desc %></textarea>
                    </div>

                    <div class="form-group mb-4">
                        <button type="submit" class="btn btn-primary">Sửa sách</button>
                    </div>
        </form>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"
        integrity="sha384-zYPOMqeu1DAVkHiLqWBUTcbYfZ8osu1Nd6Z89ify25QV9guujx43ITvfi12/QExE"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
        integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
        crossorigin="anonymous"></script>
</body>

</html>